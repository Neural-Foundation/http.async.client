<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>http.async.client documentation</title></head><body><div id="header"><h1><a href="index.html">Http.async.client 0.4.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li class="current"><a href="http.async.client.html">http.async.client</a></li><li><a href="http.async.client.headers.html">http.async.client.headers</a></li><li><a href="http.async.client.request.html">http.async.client.request</a></li><li><a href="http.async.client.status.html">http.async.client.status</a></li><li><a href="http.async.client.util.html">http.async.client.util</a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="http.async.client.html#var-DELETE">DELETE</a></li><li><a href="http.async.client.html#var-GET">GET</a></li><li><a href="http.async.client.html#var-HEAD">HEAD</a></li><li><a href="http.async.client.html#var-OPTIONS">OPTIONS</a></li><li><a href="http.async.client.html#var-POST">POST</a></li><li><a href="http.async.client.html#var-PUT">PUT</a></li><li><a href="http.async.client.html#var-await">await</a></li><li><a href="http.async.client.html#var-body">body</a></li><li><a href="http.async.client.html#var-cancel">cancel</a></li><li><a href="http.async.client.html#var-cancelled%3F">cancelled?</a></li><li><a href="http.async.client.html#var-close">close</a></li><li><a href="http.async.client.html#var-cookies">cookies</a></li><li><a href="http.async.client.html#var-create-client">create-client</a></li><li><a href="http.async.client.html#var-done%3F">done?</a></li><li><a href="http.async.client.html#var-error">error</a></li><li><a href="http.async.client.html#var-failed%3F">failed?</a></li><li><a href="http.async.client.html#var-headers">headers</a></li><li><a href="http.async.client.html#var-request-stream">request-stream</a></li><li><a href="http.async.client.html#var-status">status</a></li><li><a href="http.async.client.html#var-stream-seq">stream-seq</a></li><li><a href="http.async.client.html#var-string">string</a></li></ul></div><div class="namespace-docs" id="content"><h2>http.async.client documentation</h2><pre class="doc">Asynchronous HTTP Client - Clojure
</pre><div class="public" id="var-DELETE"><h3>DELETE</h3><div class="usage"><code>(DELETE client url &amp; {:as options})</code></div><pre class="doc">Sends asynchronously HTTP DELETE request to url.
Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.
Arguments:
- client   - client created via create-client
- url      - URL to request
- options  - keyworded arguments:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type     - either :basic or :digest
    :user     - user name to be used
    :password - password to be used
    :realm    - realm name to authenticate in
  :timeout - request timeout in ms</pre></div><div class="public" id="var-GET"><h3>GET</h3><div class="usage"><code>(GET client url &amp; {:as options})</code></div><pre class="doc">Sends asynchronously HTTP GET request to url.
Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.
Arguments:
- client   - client created via create-client
- url      - URL to request
- options  - keyworded arguments:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type     - either :basic or :digest
    :user     - user name to be used
    :password - password to be used
    :realm    - realm name to authenticate in
  :timeout - request timeout in ms</pre></div><div class="public" id="var-HEAD"><h3>HEAD</h3><div class="usage"><code>(HEAD client url &amp; {:as options})</code></div><pre class="doc">Sends asynchronously HTTP HEAD request to url.
Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.
Arguments:
- client   - client created via create-client
- url      - URL to request
- options  - keyworded arguments:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type     - either :basic or :digest
    :user     - user name to be used
    :password - password to be used
    :realm    - realm name to authenticate in
  :timeout - request timeout in ms</pre></div><div class="public" id="var-OPTIONS"><h3>OPTIONS</h3><div class="usage"><code>(OPTIONS client url &amp; {:as options})</code></div><pre class="doc">Sends asynchronously HTTP OPTIONS request to url.
Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.
Arguments:
- client   - client created via create-client
- url      - URL to request
- options  - keyworded arguments:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type     - either :basic or :digest
    :user     - user name to be used
    :password - password to be used
    :realm    - realm name to authenticate in
  :timeout - request timeout in ms</pre></div><div class="public" id="var-POST"><h3>POST</h3><div class="usage"><code>(POST client url &amp; {:as options})</code></div><pre class="doc">Sends asynchronously HTTP POST request to url.
Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.
Arguments:
- client   - client created via create-client
- url      - URL to request
- options  - keyworded arguments:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type     - either :basic or :digest
    :user     - user name to be used
    :password - password to be used
    :realm    - realm name to authenticate in
  :timeout - request timeout in ms</pre></div><div class="public" id="var-PUT"><h3>PUT</h3><div class="usage"><code>(PUT client url &amp; {:as options})</code></div><pre class="doc">Sends asynchronously HTTP PUT request to url.
Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.
Arguments:
- client   - client created via create-client
- url      - URL to request
- options  - keyworded arguments:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type     - either :basic or :digest
    :user     - user name to be used
    :password - password to be used
    :realm    - realm name to authenticate in
  :timeout - request timeout in ms</pre></div><div class="public" id="var-await"><h3>await</h3><div class="usage"><code>(await response)</code></div><pre class="doc">Waits for response processing to be finished.
Returns same response.</pre></div><div class="public" id="var-body"><h3>body</h3><div class="usage"><code>(body resp)</code></div><pre class="doc">Gets body.
If body have not yet been delivered and request hasn't failed waits for body.</pre></div><div class="public" id="var-cancel"><h3>cancel</h3><div class="usage"><code>(cancel resp)</code></div><pre class="doc">Cancels response.
</pre></div><div class="public" id="var-cancelled%3F"><h3>cancelled?</h3><div class="usage"><code>(cancelled? resp)</code></div><pre class="doc">Checks if response has been cancelled.
</pre></div><div class="public" id="var-close"><h3>close</h3><div class="usage"><code>(close client)</code></div><pre class="doc">Closes client.
</pre></div><div class="public" id="var-cookies"><h3>cookies</h3><div class="usage"><code>(cookies resp)</code></div><pre class="doc">Gets cookies from response.
</pre></div><div class="public" id="var-create-client"><h3>create-client</h3><div class="usage"><code>(create-client &amp; {:keys [compression-enabled connection-timeout follow-redirects idle-in-pool-timeout keep-alive max-conns-per-host max-conns-total max-redirects proxy auth request-timeout user-agent async-connect executor-service]})</code></div><pre class="doc">Creates new Async Http Client.
Arguments:
- :compression-enabled :: enable HTTP compression
- :connection-timeout :: connections timeout in ms
- :follow-redirects :: enable following HTTP redirects
- :idle-in-pool-timeout :: idle connection in pool timeout in ms
- :keep-alive :: enable HTTP keep alive, enabled by default
- :max-conns-per-host :: max number of polled connections per host
- :max-conns-total :: max number of total connections held open by client
- :max-redirects :: max nuber of redirects to follow
- :proxy :: map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
- :auth :: map with authentication to be used
    :type       - either :basic or :digest
    :user       - user name to be used
    :password   - password to be used
    :realm      - realm name to authenticate in
    :preemptive - assume authentication is required
- :request-timeout :: request timeout in ms
- :user-agent :: User-Agent branding string
- :async-connect :: Execute connect asynchronously
- :executor-service :: provide your own executor service for callbacks to be executed on</pre></div><div class="public" id="var-done%3F"><h3>done?</h3><div class="usage"><code>(done? resp)</code></div><pre class="doc">Checks if request is finished already (response receiving finished).
</pre></div><div class="public" id="var-error"><h3>error</h3><div class="usage"><code>(error resp)</code></div><pre class="doc">Returns Throwable if request processing failed.
</pre></div><div class="public" id="var-failed%3F"><h3>failed?</h3><div class="usage"><code>(failed? resp)</code></div><pre class="doc">Checks if request failed.
</pre></div><div class="public" id="var-headers"><h3>headers</h3><div class="usage"><code>(headers resp)</code></div><pre class="doc">Gets headers.
If headers have not yet been delivered and request hasn't failed waits for headers.</pre></div><div class="public" id="var-request-stream"><h3>request-stream</h3><div class="usage"><code>(request-stream client method url body-part-callback &amp; {:as options})</code></div><pre class="doc">Consumes stream from given url.
method - HTTP method to be used (:get, :post, ...)
url - URL to set request to
body-part-callback - callback that takes status (ref {}) of request
                     and received body part as vector of bytes
options - are optional and can contain :headers, :param, and :query (see prepare-request).</pre></div><div class="public" id="var-status"><h3>status</h3><div class="usage"><code>(status resp)</code></div><pre class="doc">Gets status if status was delivered.
</pre></div><div class="public" id="var-stream-seq"><h3>stream-seq</h3><div class="usage"><code>(stream-seq client method url &amp; {:as options})</code></div><pre class="doc">Creates potentially infinite lazy sequence of Http Stream.
</pre></div><div class="public" id="var-string"><h3>string</h3><div class="usage"><code>(string resp)</code><code>(string headers body)</code></div><pre class="doc">Converts response to string.
Or converts body taking encoding from response.</pre></div></div></body></html>