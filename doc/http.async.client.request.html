<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>http.async.client.request documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Http.async.client 1.0.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></div></li><li class="depth-3"><a href="http.async.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-4 branch"><a href="http.async.client.cert.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cert</span></div></a></li><li class="depth-4 branch"><a href="http.async.client.headers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>headers</span></div></a></li><li class="depth-4 branch"><a href="http.async.client.part.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>part</span></div></a></li><li class="depth-4 branch current"><a href="http.async.client.request.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>request</span></div></a></li><li class="depth-4 branch"><a href="http.async.client.status.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>status</span></div></a></li><li class="depth-4 branch"><a href="http.async.client.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-4"><a href="http.async.client.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="http.async.client.request.html#var-*default-callbacks*"><div class="inner"><span>*default-callbacks*</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-*user-agent*"><div class="inner"><span>*user-agent*</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-body-collect"><div class="inner"><span>body-collect</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-body-completed"><div class="inner"><span>body-completed</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-convert-action"><div class="inner"><span>convert-action</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-convert-method"><div class="inner"><span>convert-method</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-error-collect"><div class="inner"><span>error-collect</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-execute-request"><div class="inner"><span>execute-request</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-get-encoding"><div class="inner"><span>get-encoding</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-headers-collect"><div class="inner"><span>headers-collect</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-prepare-request"><div class="inner"><span>prepare-request</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-status-collect"><div class="inner"><span>status-collect</span></div></a></li><li class="depth-1"><a href="http.async.client.request.html#var-url-encode"><div class="inner"><span>url-encode</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">http.async.client.request</h2><div class="doc"><pre class="plaintext">Asynchronous HTTP Client - Clojure - Requesting API
</pre></div><div class="public anchor" id="var-*default-callbacks*"><h3>*default-callbacks*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Default set of callbacks.
</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L88">view source</a></div></div><div class="public anchor" id="var-*user-agent*"><h3>*user-agent*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L38">view source</a></div></div><div class="public anchor" id="var-body-collect"><h3>body-collect</h3><div class="usage"><code>(body-collect state baos)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L73">view source</a></div></div><div class="public anchor" id="var-body-completed"><h3>body-completed</h3><div class="usage"><code>(body-completed _)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L82">view source</a></div></div><div class="public anchor" id="var-convert-action"><h3>convert-action</h3><div class="usage"><code>(convert-action action)</code></div><div class="doc"><pre class="plaintext">Converts action (:abort, nil) to Async client STATE.
</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L171">view source</a></div></div><div class="public anchor" id="var-convert-method"><h3>convert-method</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L40">view source</a></div></div><div class="public anchor" id="var-error-collect"><h3>error-collect</h3><div class="usage"><code>(error-collect _ t)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L85">view source</a></div></div><div class="public anchor" id="var-execute-request"><h3>execute-request</h3><div class="usage"><code>(execute-request client req &amp; {status :status, headers :headers, part :part, completed :completed, error :error})</code></div><div class="doc"><pre class="plaintext">Executes provided request.
Arguments:
- req        - request to be executed
- :status    - status callback (optional, defaults to status-collect)
- :headers   - headers callback (optional, defaults to headers-collect)
- :part      - body part callback (optional, defaults to body-collect)
- :completed - response completed (optional, defaults to body-completed)
- :error     - error callback (optional, defaults to error-collect)

Returns a map:
- :id      - unique ID of request
- :status  - promise that once status is received is delivered, contains lazy map of:
  - :code     - response code
  - :msg      - response message
  - :protocol - protocol with version
  - :major    - major version of protocol
  - :minor    - minor version of protocol
- :headers - promise that once headers are received is delivered, contains lazy map of:
  - :server - header names are keyworded, values stay not changed
- :body    - body of response, depends on request type, might be ByteArrayOutputStream
             or lazy sequence, use conveniece methods to extract it, like string
- :done    - promise that is delivered once receiving response has finished
- :error   - promise that is delivered if requesting resource failed, once delivered
             will contain Throwable.</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L179">view source</a></div></div><div class="public anchor" id="var-get-encoding"><h3>get-encoding</h3><div class="usage"><code>(get-encoding {ct :content-type, :or {ct &quot;&quot;}})</code></div><div class="doc"><pre class="plaintext">Gets content encoding from headers, if Content-Type header not present
or media-type in it is missing =&gt; nil</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L50">view source</a></div></div><div class="public anchor" id="var-headers-collect"><h3>headers-collect</h3><div class="usage"><code>(headers-collect _ headers)</code></div><div class="doc"><pre class="plaintext">Reurns all headers, or aborts if no headers provided.
</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L67">view source</a></div></div><div class="public anchor" id="var-prepare-request"><h3>prepare-request</h3><div class="usage"><code>(prepare-request method url &amp; {:keys [headers query body cookies proxy auth timeout]})</code></div><div class="doc"><pre class="plaintext">Prepares method (GET, POST, ..) request to url.
Options:
  :query   - map of query parameters, if value is vector than multiple values
             will be send as n=v1&amp;n=v2
  :headers - map of headers
  :body    - body
  :cookies - cookies to send
  :proxy   - map with proxy configuration to be used
    :host     - proxy host
    :port     - proxy port
    :protocol - (optional) protocol to communicate with proxy,
                :http (default, if you provide no value) and :https are allowed
    :user     - (optional) user name to use for proxy authentication,
                has to be provided with :password
    :password - (optional) password to use for proxy authentication,
                has to be provided with :user
  :auth    - map with authentication to be used
    :type       - either :basic or :digest
    :user       - user name to be used
    :password   - password to be used
    :realm      - realm name to authenticate in
    :preemptive - assume authentication is required
  :timeout - request timeout in ms</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L105">view source</a></div></div><div class="public anchor" id="var-status-collect"><h3>status-collect</h3><div class="usage"><code>(status-collect _ status)</code></div><div class="doc"><pre class="plaintext">Returns all status and procides with execution
</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L61">view source</a></div></div><div class="public anchor" id="var-url-encode"><h3>url-encode</h3><div class="usage"><code>(url-encode arg)</code></div><div class="doc"><pre class="plaintext">Taken from Clojure Http Client
</pre></div><div class="src-link"><a href="http://github.com/cch1/http.async.client/blob/master/src/clj/http/async/client/request.clj#L98">view source</a></div></div></div></body></html>